{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getProfile,getTopTracks}from'./Utils';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Profile(){const[userName,setUserName]=useState('');const[userId,setUserId]=useState('');const[profilePicture,setProfilePicture]=useState('');const[followersCount,setFollowersCount]=useState(0);const[topTracks,setTopTracks]=useState([]);useEffect(()=>{const accessToken=localStorage.getItem('access_token');const refreshToken=localStorage.getItem('refresh_token');if(accessToken){getProfile(accessToken,refreshToken).then(data=>{if(data){setUserName(data.display_name);setUserId(data.id);// Set the user ID\nsetProfilePicture(data.images[0].url);// Assuming there's at least one image\nsetFollowersCount(data.followers.total);}}).catch(error=>{console.error('Error fetching user profile:',error);});getTopTracks(accessToken).then(tracks=>{if(tracks){setTopTracks(tracks.items);}}).catch(error=>{console.error('Error fetching top tracks:',error);});}else{console.error('Access token not found');}},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Cze\\u015B\\u0107, \",userName,\"!\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(\"https://open.spotify.com/user/\".concat(userId),'_blank'),className:\"spotify-profile-button\",children:\"Go to Spotify Profile\"}),/*#__PURE__*/_jsx(\"img\",{src:profilePicture,alt:\"Profile\"}),\" \",/*#__PURE__*/_jsxs(\"p\",{children:[\"Followers: \",followersCount]}),\" \",/*#__PURE__*/_jsxs(\"ol\",{className:\"numbered-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Top 10 Piosenek:\"}),topTracks.map((track,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold'},children:track.artists.map(artist=>artist.name).join(', ')}),\" - \",track.name]},track.id))]})]});}","map":{"version":3,"names":["React","useState","useEffect","getProfile","getTopTracks","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Profile","userName","setUserName","userId","setUserId","profilePicture","setProfilePicture","followersCount","setFollowersCount","topTracks","setTopTracks","accessToken","localStorage","getItem","refreshToken","then","data","display_name","id","images","url","followers","total","catch","error","console","tracks","items","children","onClick","window","open","concat","className","src","alt","map","track","index","style","fontWeight","artists","artist","name","join"],"sources":["/Users/kacpertomaszewski/Documents/GitHub/Spot-The-Weather/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getProfile, getTopTracks } from './Utils'; \n\nexport default function Profile() {\n    const [userName, setUserName] = useState('');\n    const [userId, setUserId] = useState('');\n    const [profilePicture, setProfilePicture] = useState('');\n    const [followersCount, setFollowersCount] = useState(0);\n    const [topTracks, setTopTracks] = useState([]);\n\n    useEffect(() => {\n        const accessToken = localStorage.getItem('access_token');\n        const refreshToken = localStorage.getItem('refresh_token');\n\n        if (accessToken) {\n            getProfile(accessToken, refreshToken)\n                .then(data => {\n                    if (data) {\n                        setUserName(data.display_name);\n                        setUserId(data.id); // Set the user ID\n                        setProfilePicture(data.images[0].url); // Assuming there's at least one image\n                        setFollowersCount(data.followers.total);\n                    }\n                })\n                .catch(error => {\n                    console.error('Error fetching user profile:', error);\n                });\n\n            getTopTracks(accessToken)\n                .then(tracks => {\n                    if (tracks) {\n                        setTopTracks(tracks.items);\n                    }\n                })\n                .catch(error => {\n                    console.error('Error fetching top tracks:', error);\n                });\n        } else {\n            console.error('Access token not found');\n        }\n    }, []);\n\n    return (\n        <>\n            <h3>Cześć, {userName}!</h3>\n            <button onClick={() => window.open(`https://open.spotify.com/user/${userId}`, '_blank')} className=\"spotify-profile-button\">\n                Go to Spotify Profile\n            </button>\n            <img src={profilePicture} alt=\"Profile\" /> {/* Display profile picture */}\n            <p>Followers: {followersCount}</p> {/* Display followers count */}\n            \n            <ol className=\"numbered-list\">\n            <h2>Top 10 Piosenek:</h2>\n                {topTracks.map((track, index) => (\n                    <li key={track.id}>\n                        <span style={{ fontWeight: 'bold' }}>{track.artists.map(artist => artist.name).join(', ')}</span> - {track.name}\n                    </li>\n                ))}\n            </ol>\n        </>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}